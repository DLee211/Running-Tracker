@page
@model Exercise_Tracker_v2.Models.Exercise

@{
    ViewData["Title"] = "Create";
}

<h1>Create a New Exercise</h1>

<hr />

<form id="createExerciseForm">
    <div class="form-group">
        <label>Date Start</label>
        <input type="text" id="dateStart" class="form-control" />
        <span class="text-danger" id="dateStartError"></span>
    </div>
    
    <div class="form-group">
        <label>Date End</label>
        <input type="text" id="dateEnd" class="form-control" />
        <span class="text-danger" id="dateEndError"></span>
    </div>
    
    <div class="form-group">
        <label>Duration</label>
        <input type="text" id="duration" class="form-control" />
        <span class="text-danger" id="durationError"></span>
    </div>
    
    <div class="form-group">
        <label>Comments</label>
        <textarea id="comments" class="form-control"></textarea>
        <span class="text-danger" id="commentsError"></span>
    </div>

    <button type="submit" class="btn btn-primary">Create</button>
</form>

@section scripts {
    <script>
        $(function () {
            $('#createExerciseForm').submit(function (e) {
                e.preventDefault();
                var data = {
                    DateStart: $('#dateStart').val(),
                    // Add other exercise properties here
                };
                $.ajax({
                    url: '/Exercise/AddExercise',
                    type: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify(data),
                    success: function () {
                        alert('Exercise created successfully.');
                        // Redirect to a different page if needed
                    },
                    error: function (xhr, textStatus, errorThrown) {
                        // Handle errors
                        console.error('Error:', errorThrown);
                        $('#dateStartError').text(xhr.responseText);
                    }
                });
            });
        });
    </script>
}